{"version":3,"file":"commonHelpers.js","sources":["../src/js/01-timer.js"],"sourcesContent":["// Описаний в документації\nimport flatpickr from 'flatpickr';\n// Додатковий імпорт стилів\nimport 'flatpickr/dist/flatpickr.min.css';\n\nconst input = document.querySelector('#datetime-picker');\nconst btnStart = document.querySelector('button[data-start]');\nconst timer = document.querySelector('.timer');\nconst daysRemaining = document.querySelector('span[data-days]');\nconst hoursRemaining = document.querySelector('span[data-hours]');\nconst minutesRemaining = document.querySelector('span[data-minutes]');\nconst secondsRemaining = document.querySelector('span[data-seconds]');\n\n\nbtnStart.classList.add('page-start-btn');\n\n\nbtnStart.setAttribute('disabled', 'true');\n\nlet userSelectedDate;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    // userSelectedDate = selectedDates[0];\n    if (selectedDates[0] > new Date()) {\n      btnStart.removeAttribute('disabled');\n      userSelectedDate = selectedDates[0];\n    } else {\n      window.alert('Please choose a date in the future');\n      btnStart.setAttribute('disabled', 'true');\n    }\n    // return (userSelectedDate = selectedDates[0]);\n  },\n};\n\nflatpickr(input, options);\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days =  Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nlet intervalId;\n\nfunction startTimer(finaltime) {\n  intervalId = setInterval(() => {\n    const currentTime = Date.now();\n    const diff = userSelectedDate - currentTime;\n    if (diff <= 0) {\n      stopTimer();\n    }\n    const timeObj = convertMs(diff);\n    tickTimer(timeObj);\n\n    // return timeObj;\n  }, 1000);\n}\n\nbtnStart.addEventListener('click', onStartBtnClick);\n\nfunction onStartBtnClick() {\n  startTimer();\n  input.disabled = true;\n  btnStart.setAttribute('disabled', 'true');\n}\n\nfunction stopTimer() {\n  clearInterval(intervalId);\n}\n\nfunction tickTimer({ days, hours, minutes, seconds }) {\n  daysRemaining.textContent = `${addPad(days)}`;\n  hoursRemaining.textContent = `${addPad(hours)}`;\n  minutesRemaining.textContent = `${addPad(minutes)}`;\n  secondsRemaining.textContent = `${addPad(seconds)}`;\n}\n\nfunction addPad(num) {\n  return num.toString().padStart(2, '0');\n}\n"],"names":["input","btnStart","daysRemaining","hoursRemaining","minutesRemaining","secondsRemaining","userSelectedDate","options","selectedDates","flatpickr","convertMs","ms","days","hours","minutes","seconds","intervalId","startTimer","finaltime","currentTime","diff","stopTimer","timeObj","tickTimer","onStartBtnClick","addPad","num"],"mappings":"mIAKA,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAW,SAAS,cAAc,oBAAoB,EAC9C,SAAS,cAAc,QAAQ,EAC7C,MAAMC,EAAgB,SAAS,cAAc,iBAAiB,EACxDC,EAAiB,SAAS,cAAc,kBAAkB,EAC1DC,EAAmB,SAAS,cAAc,oBAAoB,EAC9DC,EAAmB,SAAS,cAAc,oBAAoB,EAGpEJ,EAAS,UAAU,IAAI,gBAAgB,EAGvCA,EAAS,aAAa,WAAY,MAAM,EAExC,IAAIK,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CAEjBA,EAAc,GAAK,IAAI,MACzBP,EAAS,gBAAgB,UAAU,EACnCK,EAAmBE,EAAc,KAEjC,OAAO,MAAM,oCAAoC,EACjDP,EAAS,aAAa,WAAY,MAAM,EAG3C,CACH,EAEAQ,EAAUT,EAAOO,CAAO,EAExB,SAASG,EAAUC,EAAI,CAQrB,MAAMC,EAAQ,KAAK,MAAMD,EAAK,KAAG,EAE3BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,IAAIC,EAEJ,SAASC,EAAWC,EAAW,CAC7BF,EAAa,YAAY,IAAM,CAC7B,MAAMG,EAAc,KAAK,MACnBC,EAAOd,EAAmBa,EAC5BC,GAAQ,GACVC,IAEF,MAAMC,EAAUZ,EAAUU,CAAI,EAC9BG,EAAUD,CAAO,CAGlB,EAAE,GAAI,CACT,CAEArB,EAAS,iBAAiB,QAASuB,CAAe,EAElD,SAASA,GAAkB,CACzBP,IACAjB,EAAM,SAAW,GACjBC,EAAS,aAAa,WAAY,MAAM,CAC1C,CAEA,SAASoB,GAAY,CACnB,cAAcL,CAAU,CAC1B,CAEA,SAASO,EAAU,CAAE,KAAAX,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACpDb,EAAc,YAAc,GAAGuB,EAAOb,CAAI,IAC1CT,EAAe,YAAc,GAAGsB,EAAOZ,CAAK,IAC5CT,EAAiB,YAAc,GAAGqB,EAAOX,CAAO,IAChDT,EAAiB,YAAc,GAAGoB,EAAOV,CAAO,GAClD,CAEA,SAASU,EAAOC,EAAK,CACnB,OAAOA,EAAI,SAAU,EAAC,SAAS,EAAG,GAAG,CACvC"}